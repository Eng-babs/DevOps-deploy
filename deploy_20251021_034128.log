
==========================================
 ğŸš€ Starting Automated Deployment Script
==========================================

Enter your Git repository URL: Enter your Personal Access Token (leave blank if public): Enter branch name (default: main): Enter remote server username: Enter remote server IP address: Enter SSH private key path (e.g., ~/.ssh/key.pem): Enter application internal port (e.g., 3000): 
âœ… Parameters collected successfully.
-------------------------------------------
Repository: https://github.com/Eng-babs/DevOps-deploy.git
Branch: main
Server: ubuntu@3.88.156.135
App Port: 3000
-------------------------------------------

ğŸ“¦ Cloning or updating the repository...
Repository already exists locally. Pulling latest changes...
From https://github.com/Eng-babs/DevOps-deploy
 * branch            main       -> FETCH_HEAD
   ead4530..22cdd36  main       -> origin/main
Your branch is behind 'origin/main' by 1 commit, and can be fast-forwarded.
  (use "git pull" to update your local branch)
Already on 'main'
From https://github.com/Eng-babs/DevOps-deploy
 * branch            main       -> FETCH_HEAD
Updating ead4530..22cdd36
Fast-forward
 Dockerfile | 13 +++++--------
 1 file changed, 5 insertions(+), 8 deletions(-)
âœ… Repository ready in /c/Users/core i5/DevOps-deploy/DevOps-deploy
âœ… Docker configuration found.

ğŸ” Testing SSH connection to remote server...
âœ… SSH connection successful on DESKTOP-HPDACPJ
âœ… Remote server reachable and SSH working.

âš™ï¸ Setting up the remote environment...

======================================
 ğŸ§© Preparing Remote Server Environment
======================================
ğŸ”„ Updating system packages...
Hit:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu noble InRelease
Hit:2 http://us-east-1.ec2.archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:3 http://us-east-1.ec2.archive.ubuntu.com/ubuntu noble-backports InRelease
Hit:4 http://security.ubuntu.com/ubuntu noble-security InRelease
Reading package lists...
ğŸ“¦ Installing Docker, Docker Compose, and Nginx (if missing)...
Reading package lists...
Building dependency tree...
Reading state information...
ca-certificates is already the newest version (20240203).
curl is already the newest version (8.5.0-2ubuntu10.6).
gnupg is already the newest version (2.4.4-2ubuntu17.3).
lsb-release is already the newest version (12.0-2).
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
âœ… Docker already installed.
âœ… Docker Compose already installed.
âœ… Nginx already installed.

âœ… Versions installed:
Docker version 28.2.2, build 28.2.2-0ubuntu1~24.04.1
docker-compose version 1.29.2, build unknown
âœ… Remote server setup complete!
nginx version: nginx/1.24.0 (Ubuntu)

ğŸš€ Deploying Dockerized application on remote server...
scp: dest open "/home/ubuntu/app_deploy/.git/objects/8b/78e8ee1eae855fcb6113bb51b7e62c5ddd60d3": Permission denied
scp: upload "./.git/objects/8b/78e8ee1eae855fcb6113bb51b7e62c5ddd60d3" to "/home/ubuntu/app_deploy/.git/objects/8b/78e8ee1eae855fcb6113bb51b7e62c5ddd60d3" failed
scp: dest open "/home/ubuntu/app_deploy/.git/objects/ea/d45300551f2cfc96f873f988d8f1949a67aed8": Permission denied
scp: upload "./.git/objects/ea/d45300551f2cfc96f873f988d8f1949a67aed8" to "/home/ubuntu/app_deploy/.git/objects/ea/d45300551f2cfc96f873f988d8f1949a67aed8" failed
scp: dest open "/home/ubuntu/app_deploy/.git/objects/pack/pack-bb7b7dec7bde3f042762a79a0505b2c41af79033.idx": Permission denied
scp: upload "./.git/objects/pack/pack-bb7b7dec7bde3f042762a79a0505b2c41af79033.idx" to "/home/ubuntu/app_deploy/.git/objects/pack/pack-bb7b7dec7bde3f042762a79a0505b2c41af79033.idx" failed
scp: dest open "/home/ubuntu/app_deploy/.git/objects/pack/pack-bb7b7dec7bde3f042762a79a0505b2c41af79033.pack": Permission denied
scp: upload "./.git/objects/pack/pack-bb7b7dec7bde3f042762a79a0505b2c41af79033.pack" to "/home/ubuntu/app_deploy/.git/objects/pack/pack-bb7b7dec7bde3f042762a79a0505b2c41af79033.pack" failed
scp: dest open "/home/ubuntu/app_deploy/.git/objects/pack/pack-bb7b7dec7bde3f042762a79a0505b2c41af79033.rev": Permission denied
scp: upload "./.git/objects/pack/pack-bb7b7dec7bde3f042762a79a0505b2c41af79033.rev" to "/home/ubuntu/app_deploy/.git/objects/pack/pack-bb7b7dec7bde3f042762a79a0505b2c41af79033.rev" failed
scp: failed to upload directory . to /home/ubuntu/app_deploy
